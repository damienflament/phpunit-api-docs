sudo: false

env:
  global:
    secure: K/+gqtm+aIQOf+xNrfGkoYkBlyF61vGe2DDQilAQHV0Ki8o/BG1ppx+lIkVjAA7Atgbul0egmlhi85rlcXC40hUBykOZYJqapKHCOYTMa6oi7Lo0myLRtdqQ4OXyJZehfsocI7NA8soof8umGOfSNObD/rjPXW98bo7Wn4uJxS630GVpE504r9gAlQ6fS1G1kZx/Cw+2gvj6jsOqdNEKSlUVL1iF/wa4Q4hovF+HeuQEn/WOeKv9UMsmSB0sNcsyVNTFKch2be2R/EpvL6WxAt6xoRIG4sR5glUHCvIcusi9lmr16/TCJL11+r4fxWVMcHdr4nl0a3hB7m0BluLemRhItjIvveOGNopC88LLGW4RuJ8H9Nj1l0IpI4XdIrrbe8o0FrxqViOAE3MI/B0l5GlZAdR+a0aXN7TnMuVX01dXNQCv1GX9emO+kMhst2lyV69mPqqLLHzcE3xFps1dL3EEORbfrtlwEmxHMWcr/CIhhiXhNUUOTsXKze4wrOB2FE2uxiFXaCDYdJhOBlkeX+gJiUJqfaHH7lE4033Zl4XBk6Sq7QrSFJgn6KPVRAA+MI857iyBLgAVNkkWf/RX3gW/ymHZbhVYLPQYNGTN9YA0nPfk8fAMwFgXORm+ZBoliPJRFw+ov3Kq3iS4RDAId01MYrWwVHF1DjDe1mzbOao=

branches:
    only:
        - master

language: php

php:
    - '7.1'

before_install:
    - phpenv config-rm xdebug.ini
    - git config --global user.email 'damien.flament@gmx.com'
    - git config --global user.name  'Damien Flament'
    - echo -e "machine github.com\n login $GH_TOKEN" >> ~/.netrc

install:
    - git clone https://github.com/sebastianbergmann/phpunit.git phpunit
    - git clone --branch=gh-pages https://github.com/damienflament/phpunit-api-docs.git gh-pages
    - rm -Rf gh-pages/*
    - composer install --prefer-dist

before_script:
    - vendor/bin/sami.php --version

script:
    - vendor/bin/sami.php update phpunit.php --no-interaction --quiet

after_script:
    - cd gh-pages
    - git add *
    - git commit -m 'Automatic update by Travis.'
    - git push
